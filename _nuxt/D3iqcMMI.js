import{ck as ve,q as ye,cl as Ae,Y as Fe,cm as Se,y as ue,G as te,K as ne,cn as Ie,I as Te,co as de,i as je,cp as Re,Q as _e,C as Be,cq as Ee,c as Ve,o as Ge,M as De,cr as pe}from"#entry";import{s as Me}from"./CQxiXJjr.js";function C(r){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(r)}function me(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ae(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?me(Object(t),!0).forEach(function(n){Pe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Pe(r,e,t){return(e=Ce(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ce(r){var e=Ke(r,"string");return C(e)=="symbol"?e:e+""}function Ke(r,e){if(C(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(C(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function I(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function f(O,B,V,H){var Q=B&&B.prototype instanceof p?B:p,N=Object.create(Q.prototype);return F(N,"_invoke",(function(w,a,o){var l,u,s,b=0,$=o||[],c=!1,y={p:0,n:0,v:r,a:R,f:R.bind(r,4),d:function(_,k){return l=_,u=0,s=r,y.n=k,v}};function R(h,_){for(u=h,s=_,e=0;!c&&b&&!k&&e<$.length;e++){var k,j=$[e],E=y.p,A=j[2];h>3?(k=A===_)&&(s=j[(u=j[4])?5:(u=3,3)],j[4]=j[5]=r):j[0]<=E&&((k=h<2&&E<j[1])?(u=0,y.v=_,y.n=j[1]):E<A&&(k=h<3||j[0]>_||_>A)&&(j[4]=h,j[5]=_,y.n=A,u=0))}if(k||h>1)return v;throw c=!0,_}return function(h,_,k){if(b>1)throw TypeError("Generator is already running");for(c&&_===1&&R(_,k),u=_,s=k;(e=u<2?r:s)||!c;){l||(u?u<3?(u>1&&(y.n=-1),R(u,s)):y.n=s:y.v=s);try{if(b=2,l){if(u||(h="next"),e=l[h]){if(!(e=e.call(l,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else u===1&&(e=l.return)&&e.call(l),u<2&&(s=TypeError("The iterator does not provide a '"+h+"' method"),u=1);l=r}else if((e=(c=y.n<0)?s:w.call(a,y))!==v)break}catch(j){l=r,u=1,s=j}finally{b=1}}return{value:e,done:c}}})(O,V,H),!0),N}var v={};function p(){}function d(){}function m(){}e=Object.getPrototypeOf;var g=[][n]?e(e([][n]())):(F(e={},n,function(){return this}),e),S=m.prototype=p.prototype=Object.create(g);function T(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,m):(O.__proto__=m,F(O,i,"GeneratorFunction")),O.prototype=Object.create(S),O}return d.prototype=m,F(S,"constructor",m),F(m,"constructor",d),d.displayName="GeneratorFunction",F(m,i,"GeneratorFunction"),F(S),F(S,i,"Generator"),F(S,n,function(){return this}),F(S,"toString",function(){return"[object Generator]"}),(I=function(){return{w:f,m:T}})()}function F(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}F=function(v,p,d,m){function g(S,T){F(v,S,function(O){return this._invoke(S,T,O)})}p?i?i(v,p,{value:d,enumerable:!m,configurable:!m,writable:!m}):v[p]=d:(g("next",0),g("throw",1),g("return",2))},F(r,e,t,n)}function be(r,e,t,n,i,f,v){try{var p=r[f](v),d=p.value}catch(m){return void t(m)}p.done?e(d):Promise.resolve(d).then(n,i)}function M(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var f=r.apply(e,t);function v(d){be(f,n,i,v,p,"next",d)}function p(d){be(f,n,i,v,p,"throw",d)}v(void 0)})}}function ie(r,e){return qe(r)||Ue(r,e)||Le(r,e)||Ne()}function Ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(r,e){if(r){if(typeof r=="string")return he(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?he(r,e):void 0}}function he(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Ue(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,m=!1;try{if(f=(t=t.call(r)).next,e!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==e);d=!0);}catch(g){m=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(m)throw i}}return p}}function qe(r){if(Array.isArray(r))return r}function He(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Ae()?Fe(r):e?r():Se(r)}function Qe(r,e,t){var n=je(!0),i=Re(r,function(f,v){n.value&&e(f,v)},t);return{stop:i,pause:function(){n.value=!1},resume:function(){n.value=!0}}}function oe(r){return Object.entries(r).reduce(function(e,t){var n=ie(t,2),i=n[0],f=n[1];return i.split(/[\.\[\]]+/).filter(Boolean).reduce(function(v,p,d,m){var g;return(g=v[p])!==null&&g!==void 0?g:v[p]=isNaN(m[d+1])?d===m.length-1?f:{}:[]},e),e},{})}function ge(r,e){if(!r||!e)return null;try{var t=r[e];if(_e(t))return t}catch{}var n=e.split(/[\.\[\]]+/).filter(Boolean);return n.reduce(function(i,f){return i&&i[f]!==void 0?i[f]:void 0},r)}var We=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ve({}),n=ve({}),i=ye(function(){return Object.values(t).every(function(w){return!w.invalid})}),f=ye(function(){return oe(t)}),v=function(a,o){return{value:o??ge(e.initialValues,a),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},p=function(a,o){var l=te(o,a);return l===!0||ne(l)&&l.includes(a)},d=(function(){var w=M(I().m(function a(o,l){var u,s,b,$,c;return I().w(function(y){for(;;)switch(y.n){case 0:if(s={},!ne(e[o])){y.n=2;break}return y.n=1,O(e[o]);case 1:s=y.v,y.n=4;break;case 2:if($=(u=e[o])!==null&&u!==void 0?u:l,!$){y.n=4;break}return y.n=3,O();case 3:s=y.v;case 4:if(b=Object.keys(n).filter(function(R){var h;return(h=n[R])===null||h===void 0||(h=h.options)===null||h===void 0?void 0:h[o]})||[],c=_e(b),!c){y.n=6;break}return y.n=5,O(b);case 5:s=y.v;case 6:return y.a(2,s)}},a)}));return function(o,l){return w.apply(this,arguments)}})(),m=function(a,o,l,u){var s,b;((s=o?.[l])!==null&&s!==void 0?s:p(a,(b=e[l])!==null&&b!==void 0?b:u))&&O(a)},g=function(a,o){var l,u;if(!a)return[];(l=n[a])===null||l===void 0||l._watcher.stop(),t[a]||(t[a]=v(a,o?.initialValue));var s=ue((u=te(o,t[a]))===null||u===void 0?void 0:u.props,te(o?.props,t[a]),{name:a,onBlur:function(){t[a].touched=!0,m(a,o,"validateOnBlur")},onInput:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.value},onChange:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.type==="checkbox"||c.target.type==="radio"?c.target.checked:c.target.value},onInvalid:function(c){var y;t[a].invalid=!0,t[a].errors=c,t[a].error=(y=c?.[0])!==null&&y!==void 0?y:null}}),b=Qe(function(){return t[a].value},function($,c){t[a].pristine&&(t[a].pristine=!1),$!==c&&(t[a].dirty=!0),m(a,o,"validateOnValueUpdate",!0)});return n[a]={props:s,states:t[a],options:o,_watcher:b},[t[a],s]},S=function(a){return(function(){var o=M(I().m(function l(u){var s;return I().w(function(b){for(;;)switch(b.n){case 0:return b.n=1,d("validateOnSubmit",!0);case 1:return s=b.v,b.a(2,a(ae({originalEvent:u,valid:de(i),states:de(f),reset:B},s)))}},l)}));return function(l){return o.apply(this,arguments)}})()},T=function(a){return(function(){var o=M(I().m(function l(u){return I().w(function(s){for(;;)switch(s.n){case 0:return B(),s.a(2,a({originalEvent:u}))}},l)}));return function(l){return o.apply(this,arguments)}})()},O=(function(){var w=M(I().m(function a(o){var l,u,s,b,$,c,y,R,h,_,k,j,E,A,W,Y,z,J,X,Z,L,D,G,U,le,x,q,se,ee;return I().w(function(P){for(;;)switch(P.n){case 0:return $=Object.entries(t).reduce(function(re,$e){var ce=ie($e,2),fe=ce[0],ke=ce[1];return re.names.push(fe),re.values[fe]=ke.value,re},{names:[],values:{}}),c=[$.names,oe($.values)],y=c[0],R=c[1],P.n=1,(u=e.resolver)===null||u===void 0?void 0:u.call(e,{names:y,values:R});case 1:if(le=l=P.v,U=le!==null,!U){P.n=2;break}U=l!==void 0;case 2:if(!U){P.n=3;break}x=l,P.n=4;break;case 3:x={values:R};case 4:h=x,(b=(s=h).errors)!==null&&b!==void 0||(s.errors={}),_=[o].flat(),k=0,j=Object.entries(n);case 5:if(!(k<j.length)){P.n=12;break}if(E=ie(j[k],2),A=E[0],W=E[1],!(_.includes(A)||!o||Te(h.errors))){P.n=11;break}if(X=(Y=W.options)===null||Y===void 0?void 0:Y.resolver,!X){P.n=10;break}return L=W.states.value,P.n=6,X({values:L,value:L,name:A});case 6:if(se=Z=P.v,q=se!==null,!q){P.n=7;break}q=Z!==void 0;case 7:if(!q){P.n=8;break}ee=Z,P.n=9;break;case 8:ee={values:L};case 9:D=ee,ne(D.errors)&&(D.errors=Pe({},A,D.errors)),h=Ie(h,D);case 10:G=(z=ge(h.errors,A))!==null&&z!==void 0?z:[],t[A].invalid=G.length>0,t[A].valid=!t[A].invalid,t[A].errors=G,t[A].error=(J=G?.[0])!==null&&J!==void 0?J:null;case 11:k++,P.n=5;break;case 12:return P.a(2,ae(ae({},h),{},{errors:oe(h.errors)}))}},a)}));return function(o){return w.apply(this,arguments)}})(),B=function(){Object.keys(t).forEach((function(){var a=M(I().m(function o(l){var u,s;return I().w(function(b){for(;;)switch(b.n){case 0:return s=n[l]._watcher,s.pause(),n[l].states=t[l]=v(l,(u=n[l])===null||u===void 0||(u=u.options)===null||u===void 0?void 0:u.initialValue),b.n=1,Se();case 1:s.resume();case 2:return b.a(2)}},o)}));return function(o){return a.apply(this,arguments)}})())},V=function(a,o){t[a]!==void 0&&(t[a].value=o)},H=function(a){var o;return(o=n[a])===null||o===void 0?void 0:o.states},Q=function(a){Object.keys(a).forEach(function(o){return V(o,a[o])})},N=function(){d("validateOnMount")};return He(N),{defineField:g,setFieldValue:V,getFieldState:H,handleSubmit:S,handleReset:T,validate:O,setValues:Q,reset:B,valid:i,states:f,fields:n}},Ye={root:"p-form p-component"},ze=Be.extend({name:"form",classes:Ye}),Je={name:"BaseForm",extends:Me,style:ze,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function K(r){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(r)}function Oe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Xe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oe(Object(t),!0).forEach(function(n){Ze(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ze(r,e,t){return(e=xe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xe(r){var e=er(r,"string");return K(e)=="symbol"?e:e+""}function er(r,e){if(K(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(K(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rr(r,e){return or(r)||ar(r,e)||nr(r,e)||tr()}function tr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(r,e){if(r){if(typeof r=="string")return we(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(r,e):void 0}}function we(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ar(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,m=!1;try{if(f=(t=t.call(r)).next,e!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==e);d=!0);}catch(g){m=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(m)throw i}}return p}}function or(r){if(Array.isArray(r))return r}var ur={name:"Form",extends:Je,inheritAttrs:!1,emits:["submit","reset"],setup:function(e,t){var n=t.emit,i=je(null),f=We(e),v=function(){var S;(S=i.value)===null||S===void 0||S.requestSubmit()},p=function(S,T){if(!(T!=null&&T.novalidate)){var O=f.defineField(S,T),B=rr(O,2),V=B[1];return V}return{}},d=f.handleSubmit(function(g){n("submit",g)}),m=f.handleReset(function(g){n("reset",g)});return Xe({formRef:i,submit:v,register:p,onSubmit:d,onReset:m},Ee(f,["handleSubmit","handleReset"]))}};function ir(r,e,t,n,i,f){return Ge(),Ve("form",ue({ref:"formRef",onSubmit:e[0]||(e[0]=pe(function(){return n.onSubmit&&n.onSubmit.apply(n,arguments)},["prevent"])),onReset:e[1]||(e[1]=pe(function(){return n.onReset&&n.onReset.apply(n,arguments)},["prevent"])),class:r.cx("root")},r.ptmi("root")),[De(r.$slots,"default",ue({register:n.register,valid:r.valid,reset:r.reset},r.states))],16)}ur.render=ir;export{ur as default};
